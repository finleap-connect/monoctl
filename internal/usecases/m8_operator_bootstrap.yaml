---
apiVersion: cert-manager.io/v1alpha2
kind: Certificate
metadata:
  name: m8-operator-client-cert
  namespace: monoskope
spec:
  secretName: m8-operator-client-cert
  dnsNames:
  - {{ .ApiServerAddress }}
  privateKey:
    rotationPolicy: Always
  issuerRef:
    name: m8-operator-client-ca
    kind: Issuer
    group: m8-issuer.finleap.cloud
  commonName: m8-operator
  organization:
  - YourOrganisation
  usages:
  - client auth
---
apiVersion: m8-issuer.finleap.cloud/v1alpha1
kind: Issuer
metadata:
  name: m8-operator-client-ca
  namespace: monoskope
spec:
  controlPlane: {{ .M8Endpoint }}
  clusterName: {{ .ClusterName }}
  jwtSecretName: m8-jwt-secret
---
apiVersion: v1
kind: Secret
type: Opaque
metadata:
  name: m8-jwt-secret
  namespace: monoskope
data:
  jwt: {{ .Jwt }}
